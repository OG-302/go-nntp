{
   "_id": "_design/groups",
   "language": "javascript",
   "views": {
       "list": {
           "map": "function(doc) {\n  if (doc.type === \"group\") {\n    emit(doc._id, [doc.description, 0, 0, 0]);\n  } else if (doc.type === \"article\") {\n    var groups = doc.headers[\"Newsgroups\"][0].split(\",\")\n    for (var i = 0; i < groups.length; i++) {\n        var g = groups[i]\n        emit(g, [\"\", 1, doc.nums[g], doc.nums[g]]);\n    }\n  }\n}\n",
           "reduce": "function (key, values) {\n    var result = [\"\", 0, 0, 0];\n\n    values.forEach(function(p) {\n        if (p[0].length > result[0].length) {\n            result[0] = p[0];\n        }\n        result[1] += p[1];\n\tresult[2] = Math.min(result[2], p[2]);\n\tresult[3] = Math.max(result[3], p[3]);\n        // Dumb special case\n        if (result[2] === 0 && result[1] != 0) {\n          result[2] = 1;\n        }\n    });\n\n    return result;\n}"
       }
   }
}
